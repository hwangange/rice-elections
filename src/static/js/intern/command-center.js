// Generated by CoffeeScript 1.10.0
(function() {
  var postURL;

  postURL = '/intern/command-center';

  jQuery(function() {
    var field, i, len, ref;
    ref = ['name', 'description', 'website'];
    for (i = 0, len = ref.length; i < len; i++) {
      field = ref[i];
      $('#organization-' + field).change(function() {
        return $('#organization-create').removeClass('disabled');
      });
    }
    return $('#organization-create').click(function(e) {
      var data, description, j, len1, name, ref1, val, website;
      if ($('#organization-create').hasClass('disabled')) {
        return;
      }
      name = $('#organization-name').val().trim();
      description = $('#organization-description').val().trim();
      website = $('#organization-website').val().trim();
      ref1 = [name, description, website];
      for (j = 0, len1 = ref1.length; j < len1; j++) {
        val = ref1[j];
        if (!val) {
          $('#organization-create').removeClass('btn-primary');
          $('#organization-create').addClass('btn-danger');
          $('#organization-create').text('Missing information');
          $('#organization-create').addClass('disabled');
          return;
        }
      }
      data = {
        name: name,
        description: description,
        website: website,
        method: 'create_organization'
      };
      return $.ajax({
        url: postURL,
        type: 'POST',
        data: {
          'data': JSON.stringify(data)
        },
        success: (function(_this) {
          return function(data) {
            var response;
            response = JSON.parse(data);
            if (response.status === 'OK') {
              $('#organization-create').removeClass('btn-danger');
              $('#organization-create').addClass('btn-success');
              $('#organization-create').text('Created');
              return $('#organization-create').addClass('disabled');
            }
          };
        })(this)
      });
    });
  });

}).call(this);

//# sourceMappingURL=command-center.js.map
